function y = accBPFilter_commercial_30Hz(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.1 and the DSP System Toolbox 9.3.
% Generated on: 07-Jan-2018 20:59:27

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fstop1 = 0.25;  % First Stopband Frequency
    % Fpass1 = 0.75;  % First Passband Frequency
    % Fpass2 = 2;     % Second Passband Frequency
    % Fstop2 = 2.5;   % Second Stopband Frequency
    % Astop1 = 60;    % First Stopband Attenuation (dB)
    % Apass  = 1;     % Passband Ripple (dB)
    % Astop2 = 80;    % Second Stopband Attenuation (dB)
    % Fs     = 30;    % Sampling Frequency
    %
    % h = fdesign.bandpass('fst1,fp1,fp2,fst2,ast1,ap,ast2', Fstop1, Fpass1, ...
    %                      Fpass2, Fstop2, Astop1, Apass, Astop2, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'passband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 0 -1 1 -1.80021423898094 0.975027642979045; 1 0 -1 1 ...
        -1.96662843800241 0.990543544164713; 1 0 -1 1 -1.75893961275771 ...
        0.927505976244675; 1 0 -1 1 -1.94781283749433 0.971801030296272; 1 0 -1 ...
        1 -1.72312360581421 0.883927089486004; 1 0 -1 1 -1.92875769504808 ...
        0.95312551024699; 1 0 -1 1 -1.69322925651009 0.844998046723333; 1 0 -1 1 ...
        -1.90925656627748 0.93433252487432; 1 0 -1 1 -1.66960331486462 ...
        0.811298022515922; 1 0 -1 1 -1.88909214094811 0.915245924298569; 1 0 -1 ...
        1 -1.65251361329701 0.783318659993509; 1 0 -1 1 -1.86803634112663 ...
        0.895702205034579; 1 0 -1 1 -1.8458584168883 0.875564839292146; 1 0 -1 1 ...
        -1.64217180974944 0.761494497021136; 1 0 -1 1 -1.82235034076759 ...
        0.854757325703748; 1 0 -1 1 -1.63873254623022 0.746214852876037; 1 0 -1 ...
        1 -1.79738616851302 0.833328942923516; 1 0 -1 1 -1.64225307590606 ...
        0.737801068607634; 1 0 -1 1 -1.77103830211672 0.811568517039945; 1 0 -1 ...
        1 -1.65259126586684 0.736423499417577; 1 0 -1 1 -1.74376060257127 ...
        0.790160981160866; 1 0 -1 1 -1.66923283934021 0.741936452162887; 1 0 -1 ...
        1 -1.71657874290303 0.77031100271518; 1 0 -1 1 -1.69110816116511 ...
        0.753665921088833], ...
        'ScaleValues', [0.133034572273407; 0.133034572273407; ...
        0.130835386168241; 0.130835386168241; 0.128794411514161; ...
        0.128794411514161; 0.126929042664985; 0.126929042664985; ...
        0.125252116127299; 0.125252116127299; 0.123772842413338; ...
        0.123772842413338; 0.122497629659595; 0.122497629659595; ...
        0.121430784002573; 0.121430784002573; 0.120575085544675; ...
        0.120575085544675; 0.119932246387448; 0.119932246387448; ...
        0.119503260494128; 0.119503260494128; 0.119288655544475; ...
        0.119288655544475; 1]);
end

s = double(x);
y = step(Hd,s);

